Installation
************

   This document is divided into four parts: the first part (For the
impatient) provides a quick overview of configuration and compilation
instructions.  It also lists those options to the configure shell script
which are unique to gnuplot.  Part two describes the environment variables
used by gnuplot.  Part three (Basic Installation) describes generic
installation instructions, which are common between most packages using
GNU autoconf.  Part four explains in detail how --with-PACKAGE=PATH
works, and how this option interacts with --libdir and --includedir.

 The description of preprocessor options previously found here has been
moved to a new file called 0PORTING.

For the impatient
=================

   First, tune term.h to choose which terminal drivers you wish to enable.
If you want to support gif output, you need to download, compile and
install the gd library : see term/gif.trm for details.

If you want to support png output (free gif alternative), you need
png and z libraries : see term/png.trm for details.  Note that the
png library might not compile without an ANSI/ISO C compiler.

   On platforms which do not support GNU autoconf/configure, ie. most
non-Unix platforms, look for a makefile that looks suitable,
(makefile.emx for emx on dos, makefile.nt for MS VC++ 4.x on NT and
probably win95, makefile.win for borland c on win95/nt, etc.)

Unix, configure
---------------

   On unix, use
$ ./configure
$ make

 There are several options available for configure that you may want
to change.  A complete list of options is available through

$ ./configure --help

  --prefix=PREFIX         Install architecture-independent files in PREFIX
                          [/usr/local]. The gnuplot (and gnuplot_x11) binary
                          is installed in PREFIX/bin.
  --datadir=DIR           Read-only architecture-independent data in DIR
                          [PREFIX/share]. The gnuplot help file is installed
                          in this directory.
  --libdir=DIR            object code libraries in DIR [EPREFIX/lib]
  --includedir=DIR        C header files in DIR [PREFIX/include]
  --mandir=DIR            Man documentation in DIR [PREFIX/man]
  --without-readline      Do not use the included readline function
  --with-gnu-readline     Use the GNU readline version  If you don't use this,
                          you won't have file name completion.
  --with-gnu-readline=PATH        Specify the location of libreadline.
                          Use this form if your libreadline is not installed
                          where your linker can find it.
  --with-gd (*)           Enable gif terminal with Tom Boutell's gd library
                          (requires GD library)
  --with-gd=PATH                  Specify the location of libgd
  --with-png (*)          Enable png terminal
                          (requires libpng and libz)
  --with-png=PATH                 Specify the location of libpng
  --with-cwdrc            Check current directory for .gnuplotrc file,
                          normally disabled for security reasons. However,
                          the home directory is always checked for a
                          .gnuplotrc file.
  --with-lasergnu         Install lasergnu printer script
  --without-linux-vga (*) Do not use the Linux console driver
                          (requires Linux SVGAlib /usr/lib/libvga)
  --with-x (*)            Use the X Window System

 Options marked with (*) are on by default, ie. these features or packages
will be used if configure can detect them, even if the corresponding option
is not specified.  Please note that the `--with-PACKAGE' options can have
additional arguments:

 o `--with-PACKAGE' is equivalent to `--with-PACKAGE=yes'
 o `--with-PACKAGE=no' will disable checking for PACKAGE
 o `--with-PACKAGE=PATH' will check for PACKAGE in PATH

Unix, no configure
------------------

  The older, no-longer-preferred, way is to copy makefile.unx to Makefile
      cp makefile.unx Makefile
  Look through the Makefile to see if you need to make any changes.
  See especially the HELPDEST and TERMFLAGS variables.  Edit if needed.
  Alternatively, all these variables may be set as command line arguments to
  'make'. For example:

        make <MACHINE> HELPDEST='/usr/um/misc/lib/gnuplot.gih' \
                DEST='/usr/um/misc/bin' READLINE=

  Type
      make
  For further instructions.
  If that works, try
      make install
  For further instructions.

VMS
---

   On VMS, invoke MAKE_VMS.COM (or BUILDVMS.COM if you have MMS or MMK
but don't want to use the supplied DESCRIP.MMS).  You may get warnings
or more serious errors depending on the versions of the C compiler, the 
C run-time libraries, and {Open}VMS on your system.  


  To compile using DEC MMS or PD clone (MMK ?),
     invoke MMS or MMK with the supplied descrip.mms
  Or if you have a unix-like make utility
     copy makefile.vms makefile.
     make
  Or if you don't have a suitable make:
     @buildvms
  To tell gnuplot where to find the help library:
      $ define gnuplot$help disk:[directory]gnuplot.hlb
  Alternatively (and preferably) put the help in the main system help library.

AmigaOS
-------

Using Aztec C 5.2a
      make -f makefile.ami
Using SAS/C 6.1 or later versions
      smake -f makefile.amg
Using gcc: see Unix

Atari/TOS
---------

Using gcc 2.x as unix cross- or native compiler
	make -f makefile.st
(Edit top of makefile.st for name of crosscompiler or choose native setting)
Using PureC
	use gnuplot.prj
Using TurboC
	use gnuplot.prj
(Edit gnuplot.prj according to notes at the beginning)

MS-Windows
----------

Using Microsoft C 7.0 and compiling for MS-Windows
      copy makefile.msw makefile
      nmake
  Put wgnuplot.exe, wgnuplot.dll, wgnuplot.hlp and wgnuplot.mnu
  in the windows directory.

Using Borland C++ 3.1 and compiling for MS-Windows
      copy makefile.win makefile
  Edit makefile to change TC.
      make
  Put wgnuplot.exe, wgnuplot.dll, wgnuplot.hlp and wgnuplot.mnu
  in the windows directory.

MSDOS
-----

Using Microsoft C 7.0.
      copy makefile.msc makefile
      nmake 

Using Borland C++ 3.0
      copy makefile.tc makefile
  Edit makefile to change TC, BIN, BGI, BGIOBJ. You may also want to turn
  off overlays (See manual for more on overlays).
      make

The file gnuplot.gih is needed for help on the PC.
If the file gnuplot.gih is not in the default directory, then use:
    set GNUHELP={full path name of gnuplot.gih}

OS/2
----

To compile under OS/2 (2.x and above) you need the development
suite EMX 0.9 (including a gcc port). To build you should also
have NMake (version 4.xx) and IPFC (Information Presentation
Facility Compiler), both available from the Developer's Toolkit
(nowadays they are accessible through IBM's website).

    nmake -f makefile.os2
will show you all options which the makefile.os2 understands.
You can choose between different compiling options and specify
some additional terminals to include. You can create a version offering
PM graphics as well as a X11 version (to use with XFree86 for OS/2).

See other sections of the manuals for more information about
installing gnuplot on OS/2.

Environment Variables
=====================

See 'help environment'.

If the environment variable GNUTERM is found, it is used as the terminal
type. Otherwise, in some cases the variable TERM will be used, or the
hardware may be automatically detected.

The PC version looks for the environment variable GNUPLOT to contain
the name of the directory from which to load the initialization file
GNUPLOT.INI.  See the help on 'start_up' for more information.

HOME is examined as a directory where a .gnuplot startup file might be
found. See help on "start-up".

If defined, the environment variable GNUHELP is used for the name
of the .gih help file, otherwise HELPFILE (defined in makefile or
plot.c) is used.

The VMS version looks for the logical name GNUPLOT$HELP to locate
the help library.

The CGI drivers need the CGIPATH environment variable to set the path
to the CGI agents, and the CGIDISP and/or CGIPRNT environment variables
to set the output devices.

 If using dynamically linked executables with the X11 Window System, it
may be necessary to define LD_LIBRARY_PATH - see man ld for details.


Basic Installation
******************

   These are generic installation instructions.

   The `configure' shell script attempts to guess correct values for
various system-dependent variables used during compilation.  It uses
those values to create a `Makefile' in each directory of the package.
It may also create one or more `.h' files containing system-dependent
definitions.  Finally, it creates a shell script `config.status' that
you can run in the future to recreate the current configuration, a file
`config.cache' that saves the results of its tests to speed up
reconfiguring, and a file `config.log' containing compiler output
(useful mainly for debugging `configure').

   If you need to do unusual things to compile the package, please try
to figure out how `configure' could check whether to do them, and mail
diffs or instructions to the address given in the `README' so they can
be considered for the next release.  If at some point `config.cache'
contains results you don't want to keep, you may remove or edit it.

   The file `configure.in' is used to create `configure' by a program
called `autoconf'.  You only need `configure.in' if you want to change
it or regenerate `configure' using a newer version of `autoconf'.

The simplest way to compile this package is:

  1. `cd' to the directory containing the package's source code and type
     `./configure' to configure the package for your system.  If you're
     using `csh' on an old version of System V, you might need to type
     `sh ./configure' instead to prevent `csh' from trying to execute
     `configure' itself.

     Running `configure' takes awhile.  While running, it prints some
     messages telling which features it is checking for.

  2. Type `make' to compile the package.

  3. Optionally, type `make check' to run any self-tests that come with
     the package.

  4. Type `make install' to install the programs and any data files and
     documentation.

  5. You can remove the program binaries and object files from the
     source code directory by typing `make clean'.  To also remove the
     files that `configure' created (so you can compile the package for
     a different kind of computer), type `make distclean'.  There is
     also a `make maintainer-clean' target, but that is intended mainly
     for the package's developers.  If you use it, you may have to get
     all sorts of other programs in order to regenerate files that came
     with the distribution.

Compilers and Options
=====================

   Some systems require unusual options for compilation or linking that
the `configure' script does not know about.  You can give `configure'
initial values for variables by setting them in the environment.  Using
a Bourne-compatible shell, you can do that on the command line like
this:
     CC=c89 CFLAGS=-O2 LIBS=-lposix ./configure

Or on systems that have the `env' program, you can do it like this:
     env CPPFLAGS=-I/usr/local/include LDFLAGS=-s ./configure

Compiling For Multiple Architectures
====================================

   You can compile the package for more than one kind of computer at the
same time, by placing the object files for each architecture in their
own directory.  To do this, you must use a version of `make' that
supports the `VPATH' variable, such as GNU `make'.  `cd' to the
directory where you want the object files and executables to go and run
the `configure' script.  `configure' automatically checks for the
source code in the directory that `configure' is in and in `..'.

   If you have to use a `make' that does not supports the `VPATH'
variable, you have to compile the package for one architecture at a time
in the source code directory.  After you have installed the package for
one architecture, use `make distclean' before reconfiguring for another
architecture.

Installation Names
==================

   By default, `make install' will install the package's files in
`/usr/local/bin', `/usr/local/man', etc.  You can specify an
installation prefix other than `/usr/local' by giving `configure' the
option `--prefix=PATH'.

   You can specify separate installation prefixes for
architecture-specific files and architecture-independent files.  If you
give `configure' the option `--exec-prefix=PATH', the package will use
PATH as the prefix for installing programs and libraries.
Documentation and other data files will still use the regular prefix.

   In addition, if you use an unusual directory layout you can give
options like `--bindir=PATH' to specify different values for particular
kinds of files.  Run `configure --help' for a list of the directories
you can set and what kinds of files go in them.

   If the package supports it, you can cause programs to be installed
with an extra prefix or suffix on their names by giving `configure' the
option `--program-prefix=PREFIX' or `--program-suffix=SUFFIX'.

Optional Features
=================

   Some packages pay attention to `--enable-FEATURE' options to
`configure', where FEATURE indicates an optional part of the package.
They may also pay attention to `--with-PACKAGE' options, where PACKAGE
is something like `gnu-as' or `x' (for the X Window System).  The
`README' should mention any `--enable-' and `--with-' options that the
package recognizes.

   For packages that use the X Window System, `configure' can usually
find the X include and library files automatically, but if it doesn't,
you can use the `configure' options `--x-includes=DIR' and
`--x-libraries=DIR' to specify their locations.

Specifying the System Type
==========================

   There may be some features `configure' can not figure out
automatically, but needs to determine by the type of host the package
will run on.  Usually `configure' can figure that out, but if it prints
a message saying it can not guess the host type, give it the
`--host=TYPE' option.  TYPE can either be a short name for the system
type, such as `sun4', or a canonical name with three fields:
     CPU-COMPANY-SYSTEM

See the file `config.sub' for the possible values of each field.  If
`config.sub' isn't included in this package, then this package doesn't
need to know the host type.

   If you are building compiler tools for cross-compiling, you can also
use the `--target=TYPE' option to select the type of system they will
produce code for and the `--build=TYPE' option to select the type of
system on which you are compiling the package.

Sharing Defaults
================

   If you want to set default values for `configure' scripts to share,
you can create a site shell script called `config.site' that gives
default values for variables like `CC', `cache_file', and `prefix'.
`configure' looks for `PREFIX/share/config.site' if it exists, then
`PREFIX/etc/config.site' if it exists.  Or, you can set the
`CONFIG_SITE' environment variable to the location of the site script.
A warning: not all `configure' scripts look for a site script.

Operation Controls
==================

   `configure' recognizes the following options to control how it
operates.

`--cache-file=FILE'
     Use and save the results of the tests in FILE instead of
     `./config.cache'.  Set FILE to `/dev/null' to disable caching, for
     debugging `configure'.

`--help'
     Print a summary of the options to `configure', and exit.

`--quiet'
`--silent'
`-q'
     Do not print messages saying which checks are being made.  To
     suppress all normal output, redirect it to `/dev/null' (any error
     messages will still be shown).

`--srcdir=DIR'
     Look for the package's source code in directory DIR.  Usually
     `configure' can determine that directory automatically.

`--version'
     Print the version of Autoconf used to generate the `configure'
     script, and exit.

`configure' also accepts some other, not widely useful, options.

About --with-PACKAGE[=PATH]
***************************

 The following decsription applies only to the gnuplot configure shell
script.  It does not apply to any other package.

 Every `--with-PACKAGE' option sets a `with_package' variable in
configure.  Depending on how `--with-PACKAGE' was invoked, there are
only a few possible values for the `with_package' variable:

 Option                   $with_package
----------------------------------------
(not specified)           yes
--with-package            yes
--with-package=yes        yes
--with-package=no         no
--with-package=PATH       PATH

 This means that configure will always (by default) try to locate PACKAGE
unless `--with-package=no' was specified.  Examples for with-PACKAGE
options used by gnuplot's configure are `--with-gd', `--with-png'. The
corresponding package variables are `with_gd', and `with_png'.

 For the gnuplot package, configure uses the macros `gp_CHECK_LIB_PATH'
and `gp_CHECK_HEADER' to search for libraries and includes, resp.  These
macros are different from the standard GNU autoconf macros for this
purpose, `AC_CHECK_LIB' and `AC_CHECK_HEADER/S' (see autoconf manual).
The gp_XXX macros are closely tied to the gnuplot package, and cannot
be used for other packages without modification.

 The difference between these package specific macros and standard
autoconf macros is that they do search more than one (the default)
directory to determine the location of the specified file.

 Libraries will be searched in at least two, and up to five different
directories, depending on the PATH specified with `--with-PACKAGE=PATH':

 o the default linker path (this is really more than one directory)
 o the directory specified with the --libdir option ($libdir)
 o the PATH directory, trailing `/lib/libPACKAGE.a' stripped off
 o the PATH directory, trailing `/lib/libPACKAGE.a' stripped off and
   `/lib' added
 o the PATH directory, trailing `/libPACKAGE.a' stripped off.

 Using the default linker path as the first search directory has one
big, but not so obvious advantage: if all libraries are in the same
directory, the path to the first library specified with --with-PACKAGE
is added to the linker path.  The library searched for with the next
--with-PACKAGE option will now be found faster, because only one
directory is checked.  This is also true for header files.

 Example: the user has unpacked the gd library distribution into
/home/user/source/gd:

$ configure --with-gd=/home/user/source/gd

will search the following directories for libgd.a:

 o the default linker path
 o /usr/local/lib (default $libdir)
 o /home/user/source/gd
 o /home/user/source/gd/lib
 o /home/user/source/gd

 Include files will be searched in at least two, and up to four different
directories, depending on the PATH specified with `--with-PACKAGE=PATH':

 o the default include path (can be more than one diretcory)
 o the directory specified with --includedir ($includedir)
 o the PATH directory, trailing `/lib/libPACKAGE.a' stripped off
 o the PATH directory, trailing `/lib/libPACKAGE.a' stripped off and
   `/include' added

 Caveat: the `gp_CHECK_HEADER' macro should only be used after the
`gp_CHECK_LIB_PATH' macro to take full advantage of the search algorithm.
This is a reasonable assumption nevertheless, because it allows for
structuring configure.in so that the test for a header file is skipped
if the corresponding library is not found.

 Here are some more examples:

 o the gd and png libraries are in /usr/local/gnu/lib, which is
   automatically searched by gcc.  The corresponding header files are
   in /usr/local/gnu/include, which is not in gcc's include search path.
   Solution:

   $ ./configure --includedir=/usr/local/gnu/include

 o the gd and png libraries are in /opt/gnu/lib, the header files are
   in /opt/gnu/include.  Solution:
 
   $ ./configure --with-gd=/opt/gnu

 o the gd and png libraries and headers are all in different directories,
   none of which is in the compilers search path:

   $ ./configure --with-gd=/tmp/gd --with-png=/tmp/libpng

 Caveat: the `--libdir' and `--includedir' configure options are used in
slightly non-standard fashion: these options are normally used to
specify directories to install libraries and headers into. [I would like
to implement the more generic `--site-includes' and `--site-libraries'
options, but this is painfully difficult with the current autoconf.  It
also seems that the current autoconf maintainer and Stallman/FSF are
opposed to adding such options to the FSF autoconf distribution.]

